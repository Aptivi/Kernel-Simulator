<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Breaking API changes (Third generation) | Kernel Simulator API - Aptivi </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Breaking API changes (Third generation) | Kernel Simulator API - Aptivi ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../../favicon.ico">
    <link rel="stylesheet" href="../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../styles/docfx.css">
    <link rel="stylesheet" href="../../styles/main.css">
    <meta property="docfx:navrel" content="../../toc.html">
    <meta property="docfx:tocrel" content="../toc.html">
    
    <meta property="docfx:rel" content="../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../../index.html">
                <img id="logo" class="svg" src="../../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list">Search Results for <span></span></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination" data-first="First" data-prev="Previous" data-next="Next" data-last="Last"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h3 id="breaking-api-changes-third-generation">Breaking API changes (Third generation)</h3>

<h4 id="010-notes">0.1.0 notes</h4>
<div class="WARNING">
<h5>Warning</h5>
<p>When upgrading your mods to support 0.1.0, you must follow the compatibility notes to ensure that your mod works with 0.1.0. If you want to support both the first-generation and the second-generation KS, you must separate your mod codebase to three parts: one for the first-gen, the other for the second-gen, and the other for the third-gen. They can't coexist with each other in your KSMods directory.</p>
</div>
<h5 id="moved-events-to-kskernelevents">Moved events to KS.Kernel.Events</h5>
<p>All of the event-related code files are moved to <code>KS.Kernel.Events</code> to separate these from the actual kernel code. However, because events are part of the kernel, we prefer to put it on <code>KS.Kernel</code> namespace rather than <code>KS.Misc</code>.</p>
<h5 id="moved-platformdetector-to-kskernelkernelplatform">Moved PlatformDetector to KS.Kernel.KernelPlatform</h5>
<p>It has come to the conclusion that <code>PlatformDetector</code> is now promoted to the Kernel namespace under the name <code>KernelPlatform</code> so you can access it under the <code>KS.Kernel</code> namespace.</p>
<ul>
<li>Affected classes:
<ul>
<li>PlatformDetector -&gt; KernelPlatform</li>
</ul>
</li>
</ul>
<h5 id="separated-the-motd-and-mal-parsers">Separated the MOTD and MAL parsers</h5>
<p>MOTD and MAL parsers were unified since early versions of Kernel Simulator. However, it didn't occur to us that we need to separate them for a very long time. Now is the time to separate them, effectively removing <code>MessageType</code> enumeration.</p>
<h5 id="moved-getterminal-to-kernelplatform">Moved GetTerminal* to KernelPlatform</h5>
<p>These two functions are actually part of the terminal, and they make use of the $TERM_PROGRAM and $TERM environment variables, which are dependent on the terminal.</p>
<p>Since these usually are undefined in Windows, we put these functions to KernelPlatform to accomodate the change as platform-dependent, but we don't actually check for Linux to execute these functions, because some terminal emulators in Windows actually define these variables.</p>
<h5 id="moved-shell-common-folders-to-ksshellshells">Moved shell common folders to KS.Shell.Shells</h5>
<p>This is to separate the shell code for each tool from their folders to a unified namespace, <code>KS.Shell.Shells</code>. It houses every shell for every tool. This is to make creation of built-in shells easier.</p>
<p>This means that <code>*ShellCommon</code> modules are moved to <code>KS.Shell.Shells.*</code> and every call to that module should be redirected to that namespace. The tools, however, stays intact.</p>
<h5 id="removed-makepermanent">Removed MakePermanent()</h5>
<p>This function is now removed as a result of recent configuration improvements.</p>
<h5 id="graduated-configuration-to-kskernel">Graduated <code>Configuration</code> to <code>KS.Kernel</code></h5>
<p>This configuration logic is smart enough to be graduated, since it's the core function in the kernel. It's used everywhere, including the <code>settings</code> command, which is an application that lets you adjust settings on the go.</p>
<h5 id="graduated-findsetting-and-checksettingsvariables">Graduated <code>FindSetting</code> and <code>CheckSettingsVariables</code></h5>
<p>These two functions are probably unrelated to the settings app, but one of them is what <code>KS.Misc.Settings.SettingsApp</code> uses, and one of them is renamed to accomodate with the graduation.</p>
<ul>
<li>Renamed functions:
<ul>
<li>CheckSettingsVariables() -&gt; CheckConfigVariables()</li>
</ul>
</li>
</ul>
<h5 id="moved-power-management-functions-to-kskernelpower">Moved power management functions to <code>KS.Kernel.Power</code></h5>
<p>These power management functions were there in <code>KernelTools</code> since the earliest version of KS. Now, they're relocated to <code>KS.Kernel.Power</code>.</p>
<h5 id="removed-initpaths-in-favor-of-properties">Removed <code>InitPaths</code> in favor of properties</h5>
<p>Now, we don't have to initialize paths everytime we make an internal app that depends on Kernel Simulator's paths. The call to the function that gets the path, <code>GetKernelPath</code>, however won't be removed because it's widely used and is unaffected. This reduces the <code>NullReferenceException</code> bugs regarding paths.</p>
<h5 id="moved-kernel-update-code-to-kernelupdates">Moved kernel update code to <code>Kernel.Updates</code></h5>
<p>Same story as in power management.</p>
<h5 id="removed-listargs-from-icommand-and-iargument">Removed <code>ListArgs()</code> from <code>ICommand</code> and <code>IArgument</code></h5>
<p>It seems that <code>ListArgs()</code> is now no longer a reliable way to check for arguments, as it could be <code>null</code> when no argument is provided. While it contains a collection of switches and arguments, it's sequential. We have separated between switches and arguments as demonstrated in both the <code>ListArgsOnly()</code> and <code>ListSwitchesOnly()</code> arrays.</p>
<h5 id="moved-getesc-to-misctextcharmanager">Moved <code>GetEsc()</code> to <code>Misc.Text.CharManager</code></h5>
<p><code>GetEsc()</code> is now widely used for color manipulation, but we need to move it to a better place as migration to <code>ColorSeq</code> is done. We have deleted <code>Color255</code> from <code>KS.ConsoleBase</code> as a result of this migration.</p>
<h5 id="removed-fullargumentlist">Removed FullArgumentList</h5>
<p>Following the removal of <code>ListArgs()</code>, we can safely remove this property.</p>
<h5 id="removed-consolewriterswriteplain-in-favor-of-the-plain-writers">Removed <code>ConsoleWriters.*.Write*Plain</code> in favor of the plain writers</h5>
<p>The plain writer interfaces feel like they're a great addition to control the console writers.</p>
<h5 id="updated-debug-and-notifications-namespaces">Updated debug and notifications namespaces</h5>
<p>We felt that moving debug-related functions to <code>KS.Kernel</code> would be more convenient, so we moved these functions to it. Also, we've renamed the notifications namespace.</p>
<ul>
<li>Affected namespaces:
<ul>
<li><code>KS.Misc.Writers.DebugWriters</code> -&gt; <code>KS.Debugging</code></li>
<li><code>KS.Network.RemoteDebug</code> -&gt; <code>KS.Debugging.RemoteDebug</code></li>
<li><code>KS.Misc.Notifiers</code> -&gt; <code>KS.Misc.Notifications</code></li>
</ul>
</li>
</ul>
<h5 id="merged-parsecmd-with-executecommand">Merged <code>ParseCmd</code> with <code>ExecuteCommand</code></h5>
<p>It has come to the conclusion that <code>ParseCmd</code> is now very similar to <code>ExecuteCommand</code> with treating the remote debug shell specially. This is no longer needed as <code>ProvidedCommandArgumentsInfo</code> has been provided the IP address of the target device, making <code>ParseCmd</code> redundant.</p>
<h5 id="removed-executerdalias">Removed <code>ExecuteRDAlias()</code></h5>
<p>This function is not needed to execute aliases since there has been recent improvements to the executor in both 0.0.20.0 and 0.0.24.0.</p>
<h5 id="renamed-debug-writer-function-names">Renamed debug writer function names</h5>
<p>We needed to do the same thing as we've renamed <code>W()</code> to <code>Write()</code>, so we renamed the following:</p>
<ul>
<li>Wdbg() -&gt; WriteDebug()</li>
<li>WdbgConditional() -&gt; WriteDebugConditional()</li>
<li>WdbgDevicesOnly() -&gt; WriteDebugDevicesOnly()</li>
<li>WStkTrcConditional() -&gt; WriteDebugStackTraceConditional()</li>
<li>WStkTrc() -&gt; WriteDebugStackTrace</li>
</ul>
<h5 id="moved-mal-and-motd-message-to-miscprobersmotd">Moved MAL and MOTD message to Misc.Probers.Motd</h5>
<p>These have no relationship with the kernel directly.</p>
<h5 id="moved-hostname-from-kernel-to-networktools">Moved HostName from Kernel to NetworkTools</h5>
<p>It has no relationship with the kernel either.</p>
<h5 id="renamed-permissions-to-groups">Renamed <code>permissions</code> to <code>groups</code></h5>
<p>Renamed <code>permissions</code> to <code>groups</code> as it has been incorrectly named after the permissions. It could have been more accurately described as user groups.</p>
<h5 id="made-abstractions-regarding-the-color-management-class">Made abstractions regarding the color management class</h5>
<p>The color management used to define so many variables for just one color type. Now, it has been simplified to ease the making of the new color type. Color types are renamed to match all files that mention the color type.</p>
<p>As a result, we have removed all separate variables for each color type and merged them to simplify the declaration.</p>
<p>Also, we have added <code>GetColor()</code> and <code>SetColor()</code> functions to ColorTools to perform operations on these color types.</p>
<h5 id="moved-configcategory-outside-config-class">Moved ConfigCategory outside Config class</h5>
<p>We have moved ConfigCategory outside the Config class to better organize the enumerations relating to the configuration.</p>
<h5 id="implemented-interface-for-encryptors">Implemented interface for encryptors</h5>
<p>This will make implementing future encryptors easier for mods, since it'll now use our own encryption algorithm manager instead of relying on the mod's algorithm management.</p>
<p>An interface, IEncryptor, was created to help you implement the encryptor faster. You can use Encryption in KS.Drivers.Encryption to use helper functions.</p>
<p>However, this is only the initial stage of the implementation.</p>
<h5 id="use-commandargumentinfo-in-arguments">Use CommandArgumentInfo in arguments</h5>
<p>Using <code>CommandArgumentInfo</code> allows you to define argument information for commands. However, it's a powerful class for managing arguments for commands and kernel arguments themselves.</p>
<p>As a result, we've used <code>CommandArgumentInfo</code> in <code>ArgumentInfo</code>.</p>
<h5 id="removed-setcolors-as-theyre-no-longer-used">Removed *SetColors as they're no longer used</h5>
<p>We have improved the color tools module, so SetColors is no longer used. We've removed it for this reason. Use <code>SetColor()</code> instead.</p>
<h5 id="changed-algorithm-enum-to-encryptionalgorithms">Changed algorithm enum to EncryptionAlgorithms</h5>
<p>As part of an ongoing change to the encryption driver, we've changed the algorithm enumeration to EncryptionAlgorithms outside the Encryption module.</p>
<h5 id="renamed-two-classes-related-to-shell">Renamed two classes related to shell</h5>
<p>We have renamed the below two shell-related classes to the ones that suit the narrative of the classes.</p>
<ul>
<li>Affected classes:
<ul>
<li>ShellInfo -&gt; ShellExecuteInfo</li>
<li>ShellExecutor -&gt; BaseShell</li>
</ul>
</li>
</ul>
<h5 id="moved-textlocation-to-misctext">Moved TextLocation to Misc.Text</h5>
<p>This is a text-related enum of text vertical location (top, bottom).</p>
<h5 id="moved-getcommands-to-commandmanager">Moved GetCommands to CommandManager</h5>
<p>This sub is more of a command management routine than the &quot;getting command&quot; module work itself.</p>
<h5 id="changed-the-entire-event-system">Changed the entire event system</h5>
<p>We have moved all the events to its own dedicated array containing all the available events that the kernel introduced, removing the giant Events class and its variable, <code>KernelEventManager</code>, in the Kernel entry point class. This will reduce the need of importing the Kernel namespace and class everytime we need to directly manage the events.</p>
<p>Event firing and response functions are moved to the EventsManager class in one function, <code>FireEvent</code>.</p>
<p>This reduces the amount of lines by more than 3500 lines.</p>
<h5 id="moved-newline-from-kernel-to-charmanager">Moved NewLine from Kernel to CharManager</h5>
<p>This is actually a character management function and not a function directly to the kernel.</p>
<h5 id="moved-kslogin-to-ksuserslogin">Moved KS.Login to KS.Users.Login</h5>
<p>This has to do with the user management namespace, so we moved it to that namespace.</p>
<h5 id="moved-kernelapiversion-to-kerneltools">Moved Kernel[Api]Version to KernelTools</h5>
<p>We don't want the <code>Kernel</code> class to be publicly accessible, since it has been planned back at 0.0.1 as the class responsible for being an entry point.</p>
<p>These variables, <code>KernelVersion</code> and <code>KernelApiVersion</code>, are successfully moved to <code>KernelTools</code>.</p>
<h5 id="removed-coloredshell">Removed <code>ColoredShell</code></h5>
<p>The colors are now an essential part of KS, so we decided to take out support for uncolored shell.</p>
<h5 id="finally-condensed-tablecolor">Finally condensed <code>TableColor</code></h5>
<p>We noticed that the code is repetitive for making tables, and we don't want to update six locations every bug fix, so we decided to condense it to a single code.</p>
<p>As a side-effect, we've changed the color signatures from foreground and background pairs to header, value, separator, and background colors. Consequently, we've removed the <code>ConsoleColor</code> version of <code>TableColor</code> as we found it irrelevant thanks to the enhanced <code>Color</code> class found in the ColorSeq library.</p>
<h5 id="tried-to-balance-color-support-for-writers">Tried to balance color support for writers</h5>
<p>Migration from <code>ConsoleColor</code> to <code>ConsoleColors</code> is complete. This means that all the writers in the <code>KS.Misc.*Writers</code> now have the <code>ConsoleColors</code> support.</p>
<p>The latest ColorSeq version, 1.0.2, will be used to make it easier to achieve.</p>
<h5 id="added-last-argument-support-to-auto-completer">Added last argument support to auto completer</h5>
<p>This is to aid in trying to autocomplete subjects starting from the last argument</p>
<h5 id="renamed-command-executor-and-base-to-reduce-confusion">Renamed command executor and base to reduce confusion</h5>
<p>Base command class had the name of <code>CommandExecutor</code>. However, it behaved like the base class for your mod commands, so we renamed it to <code>BaseCommand</code>. This caused us to rename the command execution class to <code>CommandExecutor</code>.</p>
<p>Affected classes:</p>
<ul>
<li><code>CommandExecutor</code> -&gt; <code>BaseCommand</code></li>
<li><code>GetCommand</code> -&gt; <code>CommandExecutor</code></li>
</ul>
<h5 id="renamed-consolesanitychecker-to-consolechecker">Renamed ConsoleSanityChecker to ConsoleChecker</h5>
<p>This class will be filled by many console checks, so renamed it according to the purpose.</p>
<p>Affected classes:</p>
<ul>
<li><code>ConsoleSanityChecker</code> -&gt; <code>ConsoleChecker</code></li>
</ul>
<h5 id="writewhereplain-from-textwriterwherecolor-renamed">WriteWherePlain from TextWriterWhereColor renamed</h5>
<p>This change is necessary to fit in with the rest of the ConsoleWriters</p>
<p>Affected functions:</p>
<ul>
<li><code>WriteWherePlain</code> -&gt; <code>WriteWhere</code></li>
</ul>
<h5 id="removed-screensavercolors">Removed Screensaver.colors</h5>
<p>This is to remove support for 255 colors in screensavers.</p>
<h5 id="moved-ksnetwork-classes-to-ksnetworkbase">Moved KS.Network classes to KS.Network.Base</h5>
<p>These classes are believed to be the base classes for the networking. These classes are used for general networking purposes.</p>
<h5 id="condensed-speed-dial-to-ksnetworkspeeddial">Condensed speed dial to KS.Network.SpeedDial</h5>
<p>The speed dial API wasn't touched for a long time, so we decided to condense the speed dial API to a single namespace to ease the addition of the speed dial feature to all the networking shells.</p>
<p>In consequence, the speed dial format has changed.</p>
<p>Old format:</p>
<pre><code class="lang-json">  &quot;ftp.riken.jp&quot;: {
    &quot;Address&quot;: &quot;ftp.riken.jp&quot;,
    &quot;Port&quot;: 21,
    &quot;User&quot;: &quot;anonymous&quot;,
    &quot;Type&quot;: 0,
    &quot;FTP Encryption Mode&quot;: 0
  },
</code></pre>
<p>New format:</p>
<pre><code class="lang-json">  &quot;ftp.us.debian.org&quot;: {
    &quot;Address&quot;: &quot;ftp.us.debian.org&quot;,
    &quot;Port&quot;: 21,
    &quot;Type&quot;: 0,
    &quot;Options&quot;: [
      &quot;anonymous&quot;,
      0
    ]
  }
</code></pre>
<p>The username and FTP encryption mode is now moved to Options, which is an array of options that the networking shells use. To convert your speed dial entries, you have to manually open all FTP and SFTP speed dial JSON files and make changes to transition from the old format to the new format.</p>
<h5 id="moved-network-transfer-functions-to-ksnetworkbasetransfer">Moved network transfer functions to KS.Network.Base.Transfer</h5>
<p>We've done that to the base network classes, so why not do the same to the network transfer functions?</p>
<h5 id="kernel-exception-handling-changed">Kernel exception handling changed</h5>
<p>We have changed the way how the kernel exception handling works. We have simplified the code, merging all the exception classes to just one enumeration to help you filter kernel exceptions matching a specific exception.</p>
<p>As a consequence, mods that use old handling now break, and should use this format to continue working as usual:</p>
<pre><code class="lang-cs">    catch (KernelException ke) when (ke.ExceptionType == KernelExceptionType.ErrorType)
</code></pre>
<p>...where <code>ErrorType</code> is an error type obtained from the <code>KernelExceptionType</code> enumeration.</p>
<p>This also helps us in making dynamic suggestions to specific error type in the future.</p>
<h5 id="migrated-writerbase-to-drivers">Migrated WriterBase to Drivers</h5>
<p>This migration helps us in building the console driver model for the kernel driver manager, so we have migrated <code>WriterBase</code> from <code>KS.Misc.Writers</code> to <code>KS.Drivers</code> to make the future changes to the console stack happen.</p>
<h5 id="changed-getfilteredpositions-to-tuple">Changed GetFilteredPositions to tuple</h5>
<p>To aid in simplicity of the function, we've replaced the two reference variables with the tuples in their respective orders of cursor left and top positions.</p>
<h5 id="internalized-several-kernel-tools">Internalized several kernel tools</h5>
<p>These tools can be abused.</p>
<h5 id="removed-preparedict">Removed PrepareDict</h5>
<p>PrepareDict used to populate the string dictionary with definitions to the localized string. Now, because the language management routine was remodeled, we've removed PrepareDict as part of the change.</p>
<h5 id="removed-network-adapter-querying">Removed network adapter querying</h5>
<p>This functionality is no longer maintained.</p>
<h5 id="theme-preview-is-no-longer-exclusive-to-theme-studio">Theme preview is no longer exclusive to theme studio</h5>
<p>The theme preview routine used to depend on the theme studio to do its job, under the name of <code>ThemeStudioTools.PreparePreview()</code>. However, because there were recent improvements to the theming system, we've finally condensed the preview routine to <code>ThemeTools.PreviewTheme()</code>. You can no longer use the old method, because it also required loading the theme information to the theme studio itself. What if it was called in a context that has no relationship with the theme studio, such as in the case of <code>themesel</code>?</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/Aptivi/Kernel-Simulator/blob/master/DocGen/wiki/releases/Compatibility-Notes-for-Third-Generation-KS.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../styles/main.js"></script>
  </body>
</html>
